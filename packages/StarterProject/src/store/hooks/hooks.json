{
  "hooks": [
    {
      "name": "useLocalSelectedAddress",
      "fetchOptions": {
        "url": "",
        "query": ""
      },
      "componentType": "omni-hook",
      "exec": [
        {
          "name": "StateMachine",
          "function": "getData",
          "params": ["geoManager"]
        }
      ]
    },
    {
      "name": "useGeocode",
      "componentType": "omni-hook",
      "fetchOptions": {
        "url": "https://maps.googleapis.com/maps/api/geocode/json",
        "method": "GET"
      },
      "headerOptions": {
        "Content-Type": "application/x-www-form-urlencoded"
      },
      "parseResponse": {
        "to": {
          "results": {
            "pathValue": "results",
            "parseFunction": "Geolocalization",
            "function": "NormalizeGeoCode",
            "sync": true
          }
        }
      },
      "exec": [
        {
          "name": "useGeocode",
          "params": [
            {
              "key": "AIzaSyAei5DATnb2DY4UgmHgkuac96Fqgfn4mE8",
              "place_id": "{id}"
            }
          ],
          "onSuccess": [
            {
              "name": "StateMachine",
              "dependsOn": "useGeocode",
              "function": "send",
              "params": [
                "geoManager",
                "NEW-ADDRESS-HANDLER",
                {
                  "name": "department",
                  "value": {
                    "label": "{results[0].department}"
                  }
                }
              ]
            },
            {
              "name": "StateMachine",
              "dependsOn": "useGeocode",
              "function": "send",
              "params": [
                "geoManager",
                "NEW-ADDRESS-HANDLER",
                {
                  "name": "postalCode",
                  "value": "{results[0].postalCode}"
                }
              ]
            },
            {
              "name": "StateMachine",
              "dependsOn": "useGeocode",
              "function": "send",
              "params": [
                "geoManager",
                "NEW-ADDRESS-HANDLER",
                {
                  "name": "city",
                  "value": {
                    "label": "{results[0].city}"
                  }
                }
              ]
            },
            {
              "name": "StateMachine",
              "dependsOn": "useGeocode",
              "function": "send",
              "params": [
                "geoManager",
                "NEW-ADDRESS-HANDLER",
                {
                  "name": "formatted",
                  "value": "{results[0].formatted_address}"
                }
              ]
            },
            {
              "name": "StateMachine",
              "dependsOn": "useGeocode",
              "function": "send",
              "params": [
                "geoManager",
                "SELECT-SEARCHED-MAP-ADDRESS",
                {
                  "latitude": "{results[0].lat}",
                  "longitude": "{results[0].lng}",
                  "latitudeDelta": 1,
                  "longitudeDelta": 1
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "useGenerateCart",
      "componentType": "omni-hook",
      "fetchOptions": {
        "url": "{domain}/_v/private/graphql/v1?workspace=master",
        "query": "orderForm"
      },
      "parseResponse": {
        "to": {
          "idCart": "orderForm.id"
        }
      },
      "exec": [
        {
          "name": "useGenerateCart",
          "onSuccess": [
            {
              "name": "StateMachine",
              "function": "send",
              "dependsOn": "useGenerateCart",
              "params": [
                "geoManager",
                "SET-CART-ID",
                {
                  "idCart": "{idCart}"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "useUpdateOrderFormShipping",
      "componentType": "omni-hook",
      "fetchOptions": {
        "url": "{domain}/_v/private/graphql/v1?workspace=master",
        "query": "updateOrderFormShipping"
      },
      "exec": [
        {
          "name": "StateMachine",
          "function": "getData",
          "params": ["geoManager"]
        },
        {
          "name": "CookieManager",
          "function": "setCookie",
          "dependsOn": "StateMachine",
          "params": [
            "https://master--moradoapp.myvtex.com",
            {
              "name": "checkout.vtex.com",
              "value": "{context.idCart}",
              "path": "/",
              "version": "1",
              "expires": "2025-05-30T12:30:00.00-05:00",
              "secure": true,
              "httpOnly": true
            }
          ]
        },
        {
          "name": "useUpdateOrderFormShipping",
          "dependsOn": "StateMachine",
          "params": [
            {
              "orderFormId": "{context.idCart}",
              "address": {
                "state": "{context.addAddressForm.department.label}",
                "city": "{context.addAddressForm.city.label}",
                "postalCode": "{context.addAddressForm.postalCode}",
                "street": "{street}",
                "complement": "{reference}",
                "addressType": "residential",
                "country": "COL"
              }
            }
          ]
        }
      ],
      "businessLogic": {
        "middlewares": [
          {
            "name": "StateMachine",
            "function": "getData",
            "params": ["geoManager"]
          },
          {
            "name": "useCreateSession",
            "dependsOn": "StateMachine",
            "params": [
              {
                "public": {
                  "country": {
                    "value": "COL"
                  },
                  "postalCode": {
                    "value": "{context.addAddressForm.postalCode}"
                  }
                }
              }
            ]
          },
          {
            "name": "StateMachine",
            "function": "send",
            "params": ["geoManager", "CONFIRM-NEW-ADDRESS"]
          },
          {
            "name": "Navigation",
            "function": "linkTo",
            "params": ["/home"]
          }
        ]
      }
    },
    {
      "name": "useSearchAddressRedirect",
      "componentType": "omni-hook",
      "fetchOptions": {
        "url": "",
        "query": ""
      },
      "exec": [
        {
          "name": "StateMachine",
          "function": "send",
          "params": ["geoManager", "SEARCH-MAP-ADDRESS"]
        },
        {
          "name": "Navigation",
          "function": "linkTo",
          "params": ["/search/location"]
        }
      ]
    },
    {
      "name": "useEditProfile",
      "componentType": "omni-hook",
      "fetchOptions": {
        "url": "{domain}/_v/private/graphql/v1?workspace=master",
        "query": "updateProfile"
      },
      "parseResponse": {
        "to": {
          "firstName": "updateProfile.firstName",
          "lastName": "updateProfile.lastName"
        }
      },
      "exec": [
        {
          "name": "CookieManager",
          "function": "getCookie",
          "params": ["https://master--moradoapp.myvtex.com"],
          "onSuccess": [
            {
              "name": "AsyncStorage",
              "function": "storeData",
              "dependsOn": "CookieManager",
              "params": [
                "VtexIdclientAutCookie-cookie",
                "{VtexIdclientAutCookie}"
              ]
            },
            {
              "name": "AsyncStorage",
              "function": "storeData",
              "dependsOn": "CookieManager",
              "params": [
                "VtexIdclientAutCookie_moradoapp-cookie",
                "{VtexIdclientAutCookie_moradoapp}"
              ]
            },
            {
              "name": "CookieManager",
              "function": "deleteAll",
              "params": ["https://master--moradoapp.myvtex.com"]
            },
            {
              "name": "AsyncStorage",
              "function": "getData",
              "params": ["VtexIdclientAutCookie-cookie"]
            },
            {
              "name": "CookieManager",
              "function": "setCookie",
              "dependsOn": "AsyncStorage",
              "params": [
                "https://master--moradoapp.myvtex.com",
                {
                  "name": "{name}",
                  "value": "{value}",
                  "path": "/",
                  "version": "1",
                  "expires": "2025-05-30T12:30:00.00-05:00",
                  "secure": true,
                  "httpOnly": true
                }
              ]
            },
            {
              "name": "AsyncStorage",
              "function": "getData",
              "params": ["VtexIdclientAutCookie_moradoapp-cookie"]
            },
            {
              "name": "CookieManager",
              "function": "setCookie",
              "dependsOn": "AsyncStorage",
              "params": [
                "https://master--moradoapp.myvtex.com",
                {
                  "name": "{name}",
                  "value": "{value}",
                  "path": "/",
                  "version": "1",
                  "expires": "2025-05-30T12:30:00.00-05:00",
                  "secure": true,
                  "httpOnly": true
                }
              ]
            }
          ]
        },
        {
          "name": "StateMachine",
          "function": "getData",
          "params": ["authentication"]
        },
        {
          "name": "useEditProfile",
          "dependsOn": "StateMachine",
          "params": [
            {
              "fields": {
                "firstName": "{firstName}",
                "lastName": "{lastName}",
                "email": "{context.user.email}"
              }
            }
          ]
        }
      ],
      "businessLogic": {
        "middlewares": [
          {
            "name": "StateMachine",
            "function": "getData",
            "params": ["authentication"]
          },
          {
            "name": "useCustomer",
            "dependsOn": "StateMachine",
            "params": [
              {
                "public": {
                  "storeUserEmail": {
                    "value": "{context.user.email}"
                  }
                }
              }
            ]
          },
          {
            "name": "useCreateSession",
            "dependsOn": "StateMachine",
            "params": [
              {
                "public": {
                  "storeUserEmail": {
                    "value": "{context.user.email}"
                  }
                }
              }
            ]
          },
          {
            "name": "Navigation",
            "function": "linkTo",
            "params": ["/menu"]
          }
        ]
      }
    },
    {
      "name": "useStartRecoveryPasswordWithOtp",
      "componentType": "omni-hook",
      "fetchOptions": {
        "url": "{domain}/api/vtexid/pub/authentication/start"
      },
      "headerOptions": {
        "Content-Type": "application/x-www-form-urlencoded"
      },
      "parseResponse": {
        "to": {
          "authenticationToken": "authenticationToken"
        }
      },
      "exec": [
        {
          "name": "Commons",
          "function": "RandomPassword",
          "params": [16]
        },
        {
          "name": "StateMachine",
          "function": "send",
          "dependsOn": "Commons",
          "params": [
            "authentication",
            "SET_USER_DATA",
            {
              "user": {
                "email": "{email}",
                "currentPassword": "{Commons}"
              }
            }
          ]
        },
        {
          "name": "useStartRecoveryPasswordWithOtp",
          "params": [
            {
              "callbackUrl": "https://master--moradoapp.myvtex.com/api/vtexid/oauth/finish",
              "account": "moradoapp",
              "scope": "moradoapp"
            }
          ]
        }
      ],
      "businessLogic": {
        "middlewares": [
          {
            "name": "useRecoveryPasswordWithOtp",
            "dependsOn": "useStartRecoveryPasswordWithOtp",
            "params": [
              {
                "email": "{email}",
                "authenticationToken": "{authenticationToken}",
                "locale": "es-CO"
              }
            ]
          }
        ]
      }
    },
    {
      "name": "useRecoveryPasswordWithOtp",
      "componentType": "omni-hook",
      "fetchOptions": {
        "url": "{domain}/api/vtexid/pub/authentication/accesskey/send"
      },
      "headerOptions": {
        "Content-Type": "application/x-www-form-urlencoded"
      },
      "exec": [
        {
          "name": "useRecoveryPasswordWithOtp",
          "onSuccess": [
            {
              "name": "Navigation",
              "function": "linkTo",
              "params": ["/auth/password/recovery/otp/validate"]
            }
          ]
        }
      ]
    },
    {
      "name": "useStartValidateAccessKeyRecoveryWithSetPassword",
      "componentType": "omni-hook",
      "fetchOptions": {
        "url": "{domain}/api/vtexid/pub/authentication/start"
      },
      "headerOptions": {
        "Content-Type": "application/x-www-form-urlencoded"
      },
      "parseResponse": {
        "to": {
          "authenticationToken": "authenticationToken"
        }
      },
      "exec": [
        {
          "name": "useStartValidateAccessKeyRecoveryWithSetPassword",
          "params": [
            {
              "callbackUrl": "https://master--moradoapp.myvtex.com/api/vtexid/oauth/finish",
              "account": "moradoapp",
              "scope": "moradoapp"
            }
          ]
        }
      ],
      "businessLogic": {
        "middlewares": [
          {
            "name": "useValidateAccessKeyRecoveryWithSetPassword",
            "dependsOn": "useStartValidateAccessKeyRecoveryWithSetPassword",
            "params": [
              {
                "accesskey": "{accesskey}",
                "authenticationToken": "{authenticationToken}"
              }
            ]
          }
        ]
      }
    },
    {
      "name": "useValidateAccessKeyRecoveryWithSetPassword",
      "componentType": "omni-hook",
      "fetchOptions": {
        "url": "{domain}/api/vtexid/pub/authentication/classic/setpassword"
      },
      "headerOptions": {
        "Content-Type": "application/x-www-form-urlencoded"
      },
      "exec": [
        {
          "name": "StateMachine",
          "function": "send",
          "params": ["authentication", "LOGIN"]
        },
        {
          "name": "StateMachine",
          "function": "getData",
          "params": ["authentication"]
        },
        {
          "name": "useValidateAccessKeyRecoveryWithSetPassword",
          "dependsOn": "StateMachine",
          "params": [
            {
              "login": "{context.user.email}",
              "currentPassword": "",
              "newPassword": "{context.user.currentPassword}"
            }
          ]
        },
        {
          "name": "Conditions",
          "function": "If",
          "dependsOn": "useValidateAccessKeyRecoveryWithSetPassword",
          "params": [
            {
              "conditions": [
                {
                  "subject": "status",
                  "verb": "is",
                  "object": "Success"
                }
              ],
              "valueToCompare": {
                "status": "{authStatus}"
              }
            }
          ],
          "onSuccess": [
            {
              "name": "CookieManager",
              "function": "setCookie",
              "dependsOn": "useValidateAccessKeyRecoveryWithSetPassword",
              "params": [
                "https://master--moradoapp.myvtex.com",
                {
                  "name": "{accountAuthCookie.Name}",
                  "value": "{accountAuthCookie.Value}",
                  "path": "/",
                  "version": "1",
                  "expires": "2025-05-30T12:30:00.00-05:00",
                  "secure": true,
                  "httpOnly": true
                }
              ]
            },
            {
              "name": "CookieManager",
              "function": "setCookie",
              "dependsOn": "useValidateAccessKeyRecoveryWithSetPassword",
              "params": [
                "https://master--moradoapp.myvtex.com",
                {
                  "name": "VtexIdclientAutCookie",
                  "value": "{accountAuthCookie.Value}",
                  "path": "/",
                  "version": "1",
                  "expires": "2025-05-30T12:30:00.00-05:00",
                  "secure": true,
                  "httpOnly": true
                }
              ]
            },
            {
              "name": "Navigation",
              "function": "linkTo",
              "params": ["/auth/signup/security"]
            }
          ],
          "onError": [
            {
              "name": "StateMachine",
              "function": "send",
              "params": ["authentication", "LOGIN_ERROR"]
            }
          ]
        }
      ],
      "businessLogic": {
        "middlewares": [
          {
            "name": "StateMachine",
            "function": "getData",
            "params": ["authentication"]
          },
          {
            "name": "useCustomer",
            "dependsOn": "StateMachine",
            "params": [
              {
                "public": {
                  "storeUserEmail": {
                    "value": "{context.user.email}"
                  }
                }
              }
            ]
          },
          {
            "name": "useCreateSession",
            "dependsOn": "StateMachine",
            "params": [
              {
                "public": {
                  "storeUserEmail": {
                    "value": "{context.user.email}"
                  }
                }
              }
            ]
          }
        ]
      }
    },
    {
      "name": "useSaveCustomerEmail",
      "fetchOptions": {
        "url": "",
        "query": ""
      },
      "componentType": "omni-hook",
      "exec": [
        {
          "name": "StateMachine",
          "function": "send",
          "params": [
            "authentication",
            "SET_USER_DATA",
            {
              "user": {
                "email": "{email}"
              }
            }
          ]
        },
        {
          "name": "Navigation",
          "function": "linkTo",
          "params": ["/auth/signin/classic/password/second"]
        }
      ]
    },
    {
      "name": "useStartSigninWithOtp",
      "componentType": "omni-hook",
      "fetchOptions": {
        "url": "{domain}/api/vtexid/pub/authentication/start"
      },
      "headerOptions": {
        "Content-Type": "application/x-www-form-urlencoded"
      },
      "parseResponse": {
        "to": {
          "authenticationToken": "authenticationToken"
        }
      },
      "exec": [
        {
          "name": "useStartSigninWithOtp",
          "params": [
            {
              "callbackUrl": "https://master--moradoapp.myvtex.com/api/vtexid/oauth/finish",
              "account": "moradoapp",
              "scope": "moradoapp"
            }
          ],
          "onSuccess": [
            {
              "name": "StateMachine",
              "function": "send",
              "params": [
                "authentication",
                "LOGIN",
                {
                  "user": {
                    "email": "{email}"
                  }
                }
              ]
            }
          ]
        }
      ],
      "businessLogic": {
        "middlewares": [
          {
            "name": "useSigninWithOtp",
            "dependsOn": "useStartSigninWithOtp",
            "params": [
              {
                "email": "{email}",
                "authenticationToken": "{authenticationToken}",
                "locale": "es-CO"
              }
            ]
          }
        ]
      }
    },
    {
      "name": "useSigninWithOtp",
      "componentType": "omni-hook",
      "fetchOptions": {
        "url": "{domain}/api/vtexid/pub/authentication/accesskey/send"
      },
      "headerOptions": {
        "Content-Type": "application/x-www-form-urlencoded"
      },
      "exec": [
        {
          "name": "useSigninWithOtp",
          "onSuccess": [
            {
              "name": "Navigation",
              "function": "linkTo",
              "params": ["/auth/signin/otp/validate"]
            }
          ]
        }
      ]
    },
    {
      "name": "useSaveCustomerEmail",
      "fetchOptions": {
        "url": "",
        "query": ""
      },
      "componentType": "omni-hook",
      "exec": [
        {
          "name": "StateMachine",
          "function": "send",
          "params": [
            "authentication",
            "LOGIN",
            {
              "user": {
                "email": "{email}"
              }
            }
          ]
        },
        {
          "name": "Navigation",
          "function": "linkTo",
          "params": ["/auth/signin/classic/password/second"]
        }
      ]
    },
    {
      "name": "useLogout",
      "componentType": "omni-hook",
      "fetchOptions": {
        "url": "",
        "query": ""
      },
      "exec": [
        {
          "name": "StateMachine",
          "function": "listener",
          "params": [
            "authentication",
            "unauthorized",
            {
              "function": "send",
              "params": [
                "authentication",
                "REDIRECT_TO_DEFAULT_PAGE",
                {
                  "url": "/walkthrough"
                }
              ]
            },
            {
              "waitFor": "LOGOUT"
            }
          ]
        },

        {
          "name": "AsyncStorage",
          "function": "removeValue",
          "params": ["authentication-xstate"]
        },
        {
          "name": "AsyncStorage",
          "function": "removeValue",
          "params": ["topSearches-xstate"]
        },
        {
          "name": "AsyncStorage",
          "function": "removeValue",
          "params": ["cartManager-xstate"]
        },
        {
          "name": "AsyncStorage",
          "function": "removeValue",
          "params": ["geoManager-xstate"]
        },
        {
          "name": "CookieManager",
          "function": "deleteAll",
          "onSuccess": [
            {
              "name": "StateMachine",
              "function": "send",
              "params": ["geoManager", "RESET"]
            },
            {
              "name": "StateMachine",
              "function": "send",
              "params": ["cartManager", "CLEAR_CART"]
            },
            {
              "name": "StateMachine",
              "function": "send",
              "params": ["authentication", "LOGOUT"]
            }
          ]
        }
      ]
    },
    {
      "name": "useTopSearches",
      "componentType": "omni-hook",
      "fetchOptions": {
        "url": "{domain}/_v/private/graphql/v1?workspace=master",
        "query": "topSearches"
      },
      "parseResponse": {
        "to": {
          "searches": "{topSearches.searches}"
        }
      },
      "exec": [
        {
          "name": "StateMachine",
          "function": "send",
          "params": ["topSearches", "OPEN_SEARCH"]
        },
        {
          "name": "useTopSearches",
          "onSuccess": [
            {
              "name": "StateMachine",
              "function": "send",
              "dependsOn": "useTopSearches",
              "params": [
                "topSearches",
                "SET_SUGGESTIONS",
                {
                  "suggestions": "{searches}"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "useCreateSession",
      "componentType": "omni-hook",
      "fetchOptions": {
        "method": "PATCH",
        "url": "{domain}/api/sessions"
      },
      "withCookies": false,
      "parseResponse": {
        "to": {
          "session": "sessionToken",
          "segment": "segmentToken"
        }
      },
      "exec": [
        {
          "name": "useCreateSession",
          "onSuccess": [
            {
              "name": "CookieManager",
              "function": "setCookie",
              "dependsOn": "useCreateSession",
              "params": [
                "https://master--moradoapp.myvtex.com",
                {
                  "name": "vtex_session",
                  "value": "{session}",
                  "path": "/",
                  "version": "1",
                  "expires": "2025-05-30T12:30:00.00-05:00",
                  "secure": true,
                  "httpOnly": true
                }
              ]
            },
            {
              "name": "CookieManager",
              "function": "setCookie",
              "dependsOn": "useCreateSession",
              "params": [
                "https://master--moradoapp.myvtex.com",
                {
                  "name": "vtex_segment",
                  "value": "{segment}",
                  "path": "/",
                  "version": "1",
                  "expires": "2025-05-30T12:30:00.00-05:00",
                  "secure": true,
                  "httpOnly": true
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "useSigninWithEmailAndPassword",
      "componentType": "omni-hook",
      "fetchOptions": {
        "url": "{domain}/api/vtexid/pub/authentication/classic/validate"
      },
      "headerOptions": {
        "Content-Type": "application/x-www-form-urlencoded"
      },
      "exec": [
        {
          "name": "StateMachine",
          "function": "getData",
          "params": ["authentication"]
        },
        {
          "name": "useSigninWithEmailAndPassword",
          "dependsOn": "StateMachine",
          "params": [
            {
              "email": "{context.user.email}",
              "password": "{password}",
              "authenticationToken": "{authenticationToken}"
            }
          ]
        },
        {
          "name": "Conditions",
          "function": "If",
          "dependsOn": "useSigninWithEmailAndPassword",
          "params": [
            {
              "conditions": [
                {
                  "subject": "status",
                  "verb": "is",
                  "object": "Success"
                }
              ],
              "valueToCompare": {
                "status": "{authStatus}"
              }
            }
          ],
          "onSuccess": [
            {
              "name": "CookieManager",
              "function": "setCookie",
              "dependsOn": "useSigninWithEmailAndPassword",
              "params": [
                "https://master--moradoapp.myvtex.com",
                {
                  "name": "{accountAuthCookie.Name}",
                  "value": "{accountAuthCookie.Value}",
                  "path": "/",
                  "version": "1",
                  "expires": "2025-05-30T12:30:00.00-05:00",
                  "secure": true,
                  "httpOnly": true
                }
              ]
            },
            {
              "name": "CookieManager",
              "function": "setCookie",
              "dependsOn": "useSigninWithEmailAndPassword",
              "params": [
                "https://master--moradoapp.myvtex.com",
                {
                  "name": "VtexIdclientAutCookie",
                  "value": "{accountAuthCookie.Value}",
                  "path": "/",
                  "version": "1",
                  "expires": "2025-05-30T12:30:00.00-05:00",
                  "secure": true,
                  "httpOnly": true
                }
              ]
            },
            {
              "name": "Navigation",
              "function": "linkTo",
              "params": ["/home"]
            },
            {
              "name": "StateMachine",
              "function": "send",
              "params": ["authentication", "LOGIN_SUCCESS"]
            }
          ]
        }
      ]
    },
    {
      "name": "useStartSignWithEmailAndPasswordAuthentication",
      "componentType": "omni-hook",
      "fetchOptions": {
        "url": "{domain}/api/vtexid/pub/authentication/start"
      },
      "headerOptions": {
        "Content-Type": "application/x-www-form-urlencoded"
      },
      "parseResponse": {
        "to": {
          "authenticationToken": "authenticationToken"
        }
      },
      "exec": [
        {
          "name": "StateMachine",
          "function": "send",
          "params": ["authentication", "LOGIN"]
        },
        {
          "name": "useStartSignWithEmailAndPasswordAuthentication",
          "params": [
            {
              "callbackUrl": "https://master--moradoapp.myvtex.com/api/vtexid/oauth/finish",
              "account": "moradoapp",
              "scope": "moradoapp"
            }
          ]
        }
      ],
      "businessLogic": {
        "middlewares": [
          {
            "name": "StateMachine",
            "function": "getData",
            "params": ["authentication"]
          },
          {
            "name": "useSigninWithEmailAndPassword",
            "dependsOn": "useStartSignWithEmailAndPasswordAuthentication",
            "params": [
              {
                "password": "{password}",
                "authenticationToken": "{authenticationToken}"
              }
            ]
          },

          {
            "name": "useCustomer",
            "dependsOn": "StateMachine",
            "params": [
              {
                "public": {
                  "storeUserEmail": {
                    "value": "{context.user.email}"
                  }
                }
              }
            ]
          },
          {
            "name": "useCreateSession",
            "dependsOn": "StateMachine",
            "params": [
              {
                "public": {
                  "storeUserEmail": {
                    "value": "{context.user.email}"
                  }
                }
              }
            ]
          }
        ]
      }
    },
    {
      "name": "useLocalCustomerData",
      "fetchOptions": {
        "url": "",
        "query": ""
      },
      "componentType": "omni-hook",
      "exec": [
        {
          "name": "StateMachine",
          "function": "getData",
          "params": ["authentication"]
        }
      ]
    },
    {
      "name": "useUTM",
      "fetchOptions": {
        "url": "",
        "query": ""
      },
      "componentType": "omni-hook",
      "exec": [
        {
          "name": "StateMachine",
          "function": "send",
          "params": [
            "authentication",
            "LOGIN_UTM",
            {
              "user": {
                "utm": {
                  "source": "{utm_source}"
                }
              }
            }
          ]
        },
        {
          "name": "Navigation",
          "function": "linkTo",
          "params": ["/auth/signup/security"]
        }
      ]
    },
    {
      "name": "useSaveCostCenterName",
      "fetchOptions": {
        "url": "",
        "query": ""
      },
      "componentType": "omni-hook",
      "exec": [
        {
          "name": "StateMachine",
          "function": "send",
          "params": [
            "authentication",
            "LOGIN_BUSINESS_DATA",
            {
              "user": {
                "businessData": {
                  "name": "{defaultCostCenterName}"
                }
              }
            }
          ]
        },
        {
          "name": "Navigation",
          "function": "linkTo",
          "params": ["/auth/signup/business_data"]
        }
      ]
    },
    {
      "name": "useAddUserOrganization",
      "componentType": "omni-hook",
      "fetchOptions": {
        "url": "{domain}/_v/private/graphql/v1?workspace=master",
        "query": "addOrganizationUser"
      },
      "parseResponse": {
        "to": {
          "id": "addUser.id"
        }
      },
      "exec": [
        {
          "name": "StateMachine",
          "function": "getData",
          "params": ["authentication"]
        },
        {
          "name": "useAddUserOrganization",
          "dependsOn": "StateMachine",
          "params": [
            {
              "roleId": "customer-admin",
              "name": "{context.user.firstName}",
              "email": "{context.user.email}",
              "orgId": "{orgId}",
              "costId": "{costId}"
            }
          ]
        }
      ]
    },
    {
      "name": "useCreateOrganization",
      "componentType": "omni-hook",
      "fetchOptions": {
        "url": "{domain}/_v/private/graphql/v1?workspace=master",
        "query": "createOrganization"
      },
      "parseResponse": {
        "to": {
          "id": "createOrganization.id",
          "costCenterId": "createOrganization.costCenterId"
        }
      },
      "exec": [
        {
          "name": "StateMachine",
          "function": "getData",
          "params": ["authentication"]
        },
        {
          "name": "useCreateOrganization",
          "dependsOn": "StateMachine",
          "params": [
            {
              "input": {
                "name#tradeName": "{tradeName}",
                "tradeName": "{tradeName}",
                "b2bCustomerAdmin": {
                  "firstName": "{context.user.firstName}",
                  "lastName": "{context.user.lastName}",
                  "email": "{context.user.email}"
                },
                "defaultCostCenter": {
                  "name": "{context.user.businessData.name}",
                  "address": {
                    "addressId": "",
                    "addressType": "residential",
                    "city": "BOGOTÁ, D.C",
                    "country": "COL",
                    "number": "{context.user.phone}",
                    "postalCode": "11001",
                    "receiverName": "{context.user.firstName}",
                    "state": "BOGOTÁ, D.C",
                    "street": "Cll 89 #84B - 15"
                  },
                  "phoneNumber": "{context.user.phone}",
                  "businessDocument": "{businessDocument}"
                }
              }
            }
          ]
        }
      ],
      "businessLogic": {
        "middlewares": [
          {
            "name": "useAddUserOrganization",
            "dependsOn": "useCreateOrganization",
            "params": [
              {
                "orgId": "{id}",
                "costId": "{costCenterId}"
              }
            ]
          },
          {
            "name": "Navigation",
            "function": "linkTo",
            "params": ["/auth/signup/business_data/source"]
          }
        ]
      }
    },
    {
      "name": "useRedifinePassword",
      "componentType": "omni-hook",
      "fetchOptions": {
        "url": "{domain}/_v/private/graphql/v1?workspace=master",
        "query": "redefinePassword"
      },
      "parseResponse": {
        "to": {
          "redefinePassword": "redefinePassword"
        }
      },
      "exec": [
        {
          "name": "StateMachine",
          "function": "getData",
          "params": ["authentication"]
        },
        {
          "name": "useRedifinePassword",
          "dependsOn": "StateMachine",
          "params": [
            {
              "email": "{context.user.email}",
              "currentPassword": "{newPassword}",
              "newPassword": "{context.user.currentPassword}"
            }
          ],
          "onSuccess": [
            {
              "name": "Navigation",
              "function": "linkTo",
              "params": ["/home"]
            },
            {
              "name": "StateMachine",
              "function": "send",
              "params": ["authentication", "LOGIN_SUCCESS"]
            }
          ]
        }
      ]
    },
    {
      "name": "useStartValidateAccessKey",
      "componentType": "omni-hook",
      "fetchOptions": {
        "url": "{domain}/api/vtexid/pub/authentication/start"
      },
      "headerOptions": {
        "Content-Type": "application/x-www-form-urlencoded"
      },
      "parseResponse": {
        "to": {
          "authenticationToken": "authenticationToken"
        }
      },
      "exec": [
        {
          "name": "useStartValidateAccessKey",
          "params": [
            {
              "callbackUrl": "https://master--moradoapp.myvtex.com/api/vtexid/oauth/finish",
              "account": "moradoapp",
              "scope": "moradoapp"
            }
          ]
        }
      ],
      "businessLogic": {
        "middlewares": [
          {
            "name": "useValidateAccessKey",
            "dependsOn": "useStartValidateAccessKey",
            "params": [
              {
                "accesskey": "{accesskey}",
                "authenticationToken": "{authenticationToken}"
              }
            ]
          }
        ]
      }
    },
    {
      "name": "useStartValidateAccessKeyWithSetPassword",
      "componentType": "omni-hook",
      "fetchOptions": {
        "url": "{domain}/api/vtexid/pub/authentication/start"
      },
      "headerOptions": {
        "Content-Type": "application/x-www-form-urlencoded"
      },
      "parseResponse": {
        "to": {
          "authenticationToken": "authenticationToken"
        }
      },
      "exec": [
        {
          "name": "useStartValidateAccessKeyWithSetPassword",
          "params": [
            {
              "callbackUrl": "https://master--moradoapp.myvtex.com/api/vtexid/oauth/finish",
              "account": "moradoapp",
              "scope": "moradoapp"
            }
          ]
        }
      ],
      "businessLogic": {
        "middlewares": [
          {
            "name": "useValidateAccessKeyWithSetPassword",
            "dependsOn": "useStartValidateAccessKeyWithSetPassword",
            "params": [
              {
                "accesskey": "{accesskey}",
                "authenticationToken": "{authenticationToken}"
              }
            ]
          }
        ]
      }
    },
    {
      "name": "useValidateAccessKeyWithSetPassword",
      "componentType": "omni-hook",
      "fetchOptions": {
        "url": "{domain}/api/vtexid/pub/authentication/classic/setpassword"
      },
      "headerOptions": {
        "Content-Type": "application/x-www-form-urlencoded"
      },
      "exec": [
        {
          "name": "StateMachine",
          "function": "send",
          "params": ["authentication", "LOGIN"]
        },
        {
          "name": "StateMachine",
          "function": "getData",
          "params": ["authentication"]
        },
        {
          "name": "useValidateAccessKeyWithSetPassword",
          "dependsOn": "StateMachine",
          "params": [
            {
              "login": "{context.user.email}",
              "currentPassword": " ",
              "newPassword": "{context.user.currentPassword}"
            }
          ]
        },
        {
          "name": "Conditions",
          "function": "If",
          "dependsOn": "useValidateAccessKeyWithSetPassword",
          "params": [
            {
              "conditions": [
                {
                  "subject": "status",
                  "verb": "is",
                  "object": "Success"
                }
              ],
              "valueToCompare": {
                "status": "{authStatus}"
              }
            }
          ],
          "onSuccess": [
            {
              "name": "CookieManager",
              "function": "setCookie",
              "dependsOn": "useValidateAccessKeyWithSetPassword",
              "params": [
                "https://master--moradoapp.myvtex.com",
                {
                  "name": "{accountAuthCookie.Name}",
                  "value": "{accountAuthCookie.Value}",
                  "path": "/",
                  "version": "1",
                  "expires": "2025-05-30T12:30:00.00-05:00",
                  "secure": true,
                  "httpOnly": true
                }
              ]
            },
            {
              "name": "CookieManager",
              "function": "setCookie",
              "dependsOn": "useValidateAccessKeyWithSetPassword",
              "params": [
                "https://master--moradoapp.myvtex.com",
                {
                  "name": "VtexIdclientAutCookie",
                  "value": "{accountAuthCookie.Value}",
                  "path": "/",
                  "version": "1",
                  "expires": "2025-05-30T12:30:00.00-05:00",
                  "secure": true,
                  "httpOnly": true
                }
              ]
            },
            {
              "name": "Navigation",
              "function": "linkTo",
              "params": ["/auth/signup/preferences"]
            }
          ],
          "onError": [
            {
              "name": "StateMachine",
              "function": "send",
              "params": ["authentication", "LOGIN_ERROR"]
            }
          ]
        }
      ]
    },
    {
      "name": "useValidateAccessKey",
      "componentType": "omni-hook",
      "fetchOptions": {
        "url": "{domain}/api/vtexid/pub/authentication/accesskey/validate"
      },
      "headerOptions": {
        "Content-Type": "application/x-www-form-urlencoded"
      },
      "exec": [
        {
          "name": "StateMachine",
          "function": "send",
          "params": ["authentication", "LOGIN"]
        },
        {
          "name": "StateMachine",
          "function": "getData",
          "params": ["authentication"]
        },
        {
          "name": "useValidateAccessKey",
          "dependsOn": "StateMachine",
          "params": [
            {
              "login": "{context.user.email}"
            }
          ]
        },
        {
          "name": "Conditions",
          "function": "If",
          "dependsOn": "useValidateAccessKey",
          "params": [
            {
              "conditions": [
                {
                  "subject": "status",
                  "verb": "is-not",
                  "object": "WrongCredentials"
                }
              ],
              "valueToCompare": {
                "status": "{authStatus}"
              }
            }
          ],
          "onSuccess": [
            {
              "name": "CookieManager",
              "function": "setCookie",
              "dependsOn": "useValidateAccessKey",
              "params": [
                "https://master--moradoapp.myvtex.com",
                {
                  "name": "{accountAuthCookie.Name}",
                  "value": "{accountAuthCookie.Value}",
                  "path": "/",
                  "version": "1",
                  "expires": "2025-05-30T12:30:00.00-05:00",
                  "secure": true,
                  "httpOnly": true
                }
              ]
            },
            {
              "name": "Navigation",
              "function": "linkTo",
              "params": ["/home"]
            },
            {
              "name": "StateMachine",
              "function": "send",
              "params": ["authentication", "LOGIN_SUCCESS"]
            }
          ],
          "onError": [
            {
              "name": "StateMachine",
              "function": "send",
              "params": ["authentication", "LOGIN_ERROR"]
            }
          ]
        }
      ],
      "businessLogic": {
        "middlewares": [
          {
            "name": "StateMachine",
            "function": "getData",
            "params": ["authentication"]
          },
          {
            "name": "useCustomer",
            "dependsOn": "StateMachine",
            "params": [
              {
                "public": {
                  "storeUserEmail": {
                    "value": "{context.user.email}"
                  }
                }
              }
            ]
          },
          {
            "name": "useCreateSession",
            "params": [
              {
                "public": {
                  "storeUserEmail": {
                    "value": "{context.user.email}"
                  }
                }
              }
            ]
          }
        ]
      }
    },
    {
      "name": "useSendAccessKey",
      "componentType": "omni-hook",
      "fetchOptions": {
        "url": "{domain}/api/vtexid/pub/authentication/accesskey/send"
      },
      "headerOptions": {
        "Content-Type": "application/x-www-form-urlencoded"
      },
      "exec": [
        {
          "name": "useSendAccessKey",
          "onSuccess": [
            {
              "name": "Navigation",
              "function": "linkTo",
              "params": ["/auth/otp/validate"]
            }
          ]
        }
      ]
    },
    {
      "name": "useResendAccessKey",
      "componentType": "omni-hook",
      "fetchOptions": {
        "url": "{domain}/api/vtexid/pub/authentication/accesskey/send"
      },
      "headerOptions": {
        "Content-Type": "application/x-www-form-urlencoded"
      },
      "exec": [
        {
          "name": "StateMachine",
          "function": "getData",
          "params": ["authentication"]
        },
        {
          "name": "useResendAccessKey",
          "dependsOn": "StateMachine",
          "params": [
            {
              "email": "{context.user.email}"
            }
          ]
        }
      ]
    },
    {
      "name": "useStartResendAccessKey",
      "componentType": "omni-hook",
      "fetchOptions": {
        "url": "{domain}/api/vtexid/pub/authentication/start"
      },
      "headerOptions": {
        "Content-Type": "application/x-www-form-urlencoded"
      },
      "parseResponse": {
        "to": {
          "authenticationToken": "authenticationToken"
        }
      },
      "exec": [
        {
          "name": "useStartResendAccessKey",
          "params": [
            {
              "callbackUrl": "https://master--moradoapp.myvtex.com/api/vtexid/oauth/finish",
              "account": "moradoapp",
              "scope": "moradoapp"
            }
          ]
        }
      ],
      "businessLogic": {
        "middlewares": [
          {
            "name": "useResendAccessKey",
            "dependsOn": "useStartResendAccessKey",
            "inheritProps": ["authenticationToken"],
            "params": [
              {
                "authenticationToken": "{authenticationToken}",
                "locale": "es-CO"
              }
            ]
          }
        ]
      }
    },
    {
      "name": "useStartSignup",
      "componentType": "omni-hook",
      "fetchOptions": {
        "url": "{domain}/api/vtexid/pub/authentication/start"
      },
      "headerOptions": {
        "Content-Type": "application/x-www-form-urlencoded"
      },
      "parseResponse": {
        "to": {
          "authenticationToken": "authenticationToken"
        }
      },
      "exec": [
        {
          "name": "Commons",
          "function": "RandomPassword",
          "params": [16]
        },
        {
          "name": "useStartSignup",
          "params": [
            {
              "callbackUrl": "https://master--moradoapp.myvtex.com/api/vtexid/oauth/finish",
              "account": "moradoapp",
              "scope": "moradoapp"
            }
          ],
          "onSuccess": [
            {
              "name": "StateMachine",
              "function": "send",
              "dependsOn": "Commons",
              "params": [
                "authentication",
                "LOGIN",
                {
                  "user": {
                    "firstName": "{firstName}",
                    "lastName": "{lastName}",
                    "email": "{email}",
                    "phone": "{phone}",
                    "currentPassword": "{Commons}"
                  }
                }
              ]
            }
          ]
        }
      ],
      "businessLogic": {
        "middlewares": [
          {
            "name": "useSendAccessKey",
            "dependsOn": "useStartSignup",
            "inheritProps": ["authenticationToken"],
            "params": [
              {
                "email": "{email}",
                "authenticationToken": "{authenticationToken}",
                "locale": "es-CO"
              }
            ]
          }
        ]
      }
    },
    {
      "name": "useStartAuthentication",
      "componentType": "omni-hook",
      "fetchOptions": {
        "url": "{domain}/api/vtexid/pub/authentication/start"
      },
      "headerOptions": {
        "Content-Type": "application/x-www-form-urlencoded"
      },
      "parseResponse": {
        "to": {
          "authenticationToken": "authenticationToken"
        }
      },
      "exec": [
        {
          "name": "useStartAuthentication",
          "params": [
            {
              "callbackUrl": "https://master--moradoapp.myvtex.com/api/vtexid/oauth/finish",
              "account": "moradoapp",
              "scope": "moradoapp"
            }
          ],
          "onSuccess": [
            {
              "name": "StateMachine",
              "function": "send",
              "params": [
                "authentication",
                "LOGIN",
                {
                  "user": {
                    "email": "{email}"
                  }
                }
              ]
            }
          ]
        }
      ],
      "businessLogic": {
        "middlewares": [
          {
            "name": "useSendAccessKey",
            "dependsOn": "useStartAuthentication",
            "inheritProps": ["authenticationToken"],
            "params": [
              {
                "email": "{email}",
                "authenticationToken": "{authenticationToken}",
                "locale": "es-CO"
              }
            ]
          }
        ]
      }
    },
    {
      "name": "useLogin",
      "componentType": "omni-hook",
      "fetchOptions": {
        "query": "customerAccessTokenCreateMutation"
      },
      "invalidInputMessage": {
        "message": "An email and password are required to login"
      },
      "parseResponse": {
        "to": {
          "accessToken": "customerAccessTokenCreate.customerAccessToken.accessToken",
          "expiresAt": "customerAccessTokenCreate.customerAccessToken.expiresAt"
        }
      },
      "exec": [
        {
          "name": "useLogin",
          "onSuccess": [
            {
              "name": "AsyncStorage",
              "function": "storeData",
              "dependsOn": "useLogin",
              "inheritProps": ["accessToken"],
              "params": ["authToken", "{accessToken}"]
            }
          ],
          "onError": [
            {
              "name": "CommerceError",
              "message": "An email and password are required to login"
            }
          ]
        }
      ],
      "businessLogic": {
        "middlewares": [
          {
            "name": "useCustomer",
            "revalidate": true
          }
        ]
      }
    },
    {
      "name": "useCustomer",
      "componentType": "omni-hook",
      "fetchOptions": {
        "query": "getCustomerQuery",
        "url": "{domain}/_v/private/graphql/v1"
      },
      "parseResponse": {
        "to": {
          "firstName": "profile.firstName",
          "lastName": "profile.lastName",
          "email": "profile.email",
          "phone": "profile.phone"
        }
      },
      "exec": [
        {
          "name": "useCustomer"
        },
        {
          "name": "StateMachine",
          "function": "send",
          "dependsOn": "useCustomer",
          "params": [
            "authentication",
            "SET_USER_DATA",
            {
              "user": {
                "firstName": "{firstName}",
                "lastName": "{lastName}",
                "email": "{email}"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "useSearch",
      "componentType": "omni-hook",
      "fetchOptions": {
        "url": "{domain}/_v/private/graphql/v1",
        "query": "productSearch"
      },
      "parseResponse": {
        "to": {
          "products": {
            "pathValue": "productSearch",
            "parseFunction": "ProductSearch",
            "function": "NormalizeProduct",
            "sync": true
          }
        }
      },
      "exec": [
        {
          "name": "ProductSearch",
          "sync": true,
          "function": "SearchQuery",
          "params": ["{input}"]
        },
        {
          "name": "useSearch",
          "dependsOn": "ProductSearch",
          "params": ["{query}"]
        }
      ]
    },
    {
      "name": "useProduct",
      "componentType": "omni-hook",
      "fetchOptions": {
        "url": "{domain}/_v/private/graphql/v1",
        "query": "productQuery"
      },
      "parseResponse": {
        "to": {
          "product": {
            "pathValue": "product",
            "parseFunction": "ProductSearch",
            "function": "NormalizeProductDetail",
            "sync": true
          }
        }
      },
      "exec": [
        {
          "name": "useProduct",
          "params": ["{input}"]
        }
      ]
    },
    {
      "name": "useProductRecommendations",
      "componentType": "omni-hook",
      "fetchOptions": {
        "url": "{domain}/_v/private/graphql/v1",
        "query": "productRecommendations"
      },
      "parseResponse": {
        "to": {
          "products": {
            "pathValue": "productRecommendations",
            "parseFunction": "ProductSearch",
            "function": "NormalizeRelatedProducts",
            "sync": true
          }
        }
      },
      "exec": [
        {
          "name": "useProductRecommendations",
          "params": ["{inputRecommendation}"]
        }
      ]
    },
    {
      "name": "useAddCommentsCart",
      "fetchOptions": {
        "url": "",
        "query": ""
      },
      "componentType": "omni-hook",
      "exec": [
        {
          "name": "StateMachine",
          "function": "send",
          "params": [
            "cartManager",
            "ADD-COMMENTS",
            {
              "add-comments": {
                "name": "{comments}"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "useAddReportPrices",
      "componentType": "omni-hook",
      "fetchOptions": {
        "url": "{domain}/api/dataentities/HP/documents?_schema=hp_schema"
      },
      "headerOptions": {
        "Content-Type": "application/json",
        "Accept": "application/json",
        "X-VTEX-API-AppKey": "vtexappkey-moradoapp-MZFMTC",
        "X-VTEX-API-AppToken": "YXDWWPAJPEJLETQQWHLRTXJWPHHVIWGDTMMJTAQYXDJBHAKXUHJHTNVBUSMWQLDJFQTJPGVTGTCVCDALXYFEQYLTBHERKXBDQTXRHYOEYNQPPAHQZJGMYLGBIFIRXXAS"
      },
      "parseResponse": {
        "to": {
          "locationName": "locationName",
          "otherPrice": "otherPrice",
          "isExpensive": "isExpensive"
        }
      },
      "exec": [
        {
          "name": "StateMachine",
          "function": "getData",
          "params": ["productManager"]
        },
        {
          "name": "useAddReportPrices",
          "dependsOn": "StateMachine",
          "params": [
            {
              "email": "{context.selectedProduct.email}",
              "productId": "{context.selectedProduct.id}",
              "currentPrice": "{context.selectedProduct.price.value}"
            }
          ]
        }
      ]
    },
    {
      "name": "useReportPrices",
      "componentType": "omni-hook",
      "fetchOptions": {
        "method": "GET",
        "url": "https://moradoapp.vtexcommercestable.com.br/api/dataentities/HP/search?_fields=_all&_schema=hp_schema"
      },
      "headerOptions": {
        "Content-Type": "application/x-www-form-urlencoded",
        "Accept": "application/json",
        "X-VTEX-API-AppKey": "vtexappkey-moradoapp-MZFMTC",
        "X-VTEX-API-AppToken": "YXDWWPAJPEJLETQQWHLRTXJWPHHVIWGDTMMJTAQYXDJBHAKXUHJHTNVBUSMWQLDJFQTJPGVTGTCVCDALXYFEQYLTBHERKXBDQTXRHYOEYNQPPAHQZJGMYLGBIFIRXXAS",
        "REST-Range": "resources=0-500"
      },
      "parseResponse": {
        "to": {
          "locationName": "locationName",
          "productId": "productId",
          "email": "email"
        }
      },
      "exec": [
        {
          "name": "useReportPrices",
          "params": ["{input}"]
        }
      ]
    }
  ]
}
